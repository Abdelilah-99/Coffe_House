<div class="post-card" (click)="postCard.emit(post.postUuid)">
    <!-- Post with image(s) - Image as background with overlay -->
    <div *ngIf="post.mediaPaths && post.mediaPaths.length > 0" class="post-card-with-image">
        <div class="post-image-container">
            <img *ngIf="post.mediaPaths[0].type.startsWith('image/')"
                [src]="'http://localhost:8080/' + post.mediaPaths[0].path" alt="{{ post.title }}"
                class="post-background-image">
            <video *ngIf="post.mediaPaths?.length && post.mediaPaths[0].type.startsWith('video/')"
                [src]="'http://localhost:8080/' + post.mediaPaths[0].path"
                class="post-background-image">
            </video>

            <div class="post-overlay">
                <div class="post-title-overlay">
                    <h3 class="post-title">{{ post.title }}</h3>
                </div>
            </div>
        </div>
        <div class="post-footer-compact">
            <div class="post-user-info-compact">
                <img *ngIf="post.profileImagePath" [src]="'http://localhost:8080/' + post.profileImagePath"
                    alt="{{ post.userName }}" class="post-user-avatar-small">
                <div *ngIf="!post.profileImagePath" class="post-user-avatar-placeholder-small">
                    {{ post.userName.charAt(0).toUpperCase() || '?' }}
                </div>
                <div class="author-date">
                    <span class="post-author-small">{{ post.userName }}</span>
                    <span class="post-date-small">{{ post.createdAt | date:'short' }}</span>
                </div>
            </div>
            <!-- | date:'short' -->
            <div class="post-actions" (click)="$event.stopPropagation()">
                <app-post-likes [post]="post" (reaction)="reaction.emit($event)"></app-post-likes>
                <app-post-comments [post]="post" (navigate)="postCard.emit(post.postUuid)"></app-post-comments>
            </div>
        </div>
    </div>

    <!-- Post without image - Traditional layout -->
    <div *ngIf="!post.mediaPaths || post.mediaPaths.length === 0" class="post-card-traditional">
        <div class="post-header">
            <div class="post-user-info">
                <img *ngIf="post.profileImagePath" [src]="'http://localhost:8080/' + post.profileImagePath"
                    alt="{{ post.userName }}" class="post-user-avatar">
                <div *ngIf="!post.profileImagePath" class="post-user-avatar-placeholder">
                    {{ post.userName.charAt(0).toUpperCase() || '?' }}
                </div>
                <div class="post-user-details">
                    <span class="post-author">{{ post.userName }}</span>
                    <span class="post-date">{{ post.createdAt | date: 'short' }}</span>
                </div>
            </div>
            <h3 class="post-title">{{ post.title }}</h3>
        </div>

        <div class="post-content">
            <p>{{ post.content }}</p>
        </div>

        <div class="post-actions" (click)="$event.stopPropagation()">
            <app-post-likes [post]="post" (reaction)="reaction.emit($event)"></app-post-likes>
            <app-post-comments [post]="post" (navigate)="postCard.emit(post.postUuid)"></app-post-comments>
        </div>
    </div>
</div>